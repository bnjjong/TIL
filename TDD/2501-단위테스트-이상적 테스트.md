## 4.4 ì´ìƒì ì¸ í…ŒìŠ¤íŠ¸ë¥¼ ì°¾ì•„ì„œ

### ì´ìƒì ì¸ í…ŒìŠ¤íŠ¸ì˜ 4ëŒ€ íŠ¹ì„±
- **íšŒê·€ ë°©ì§€**: ì½”ë“œ ë³€ê²½ ì‹œ ê¸°ì¡´ ê¸°ëŠ¥ì´ ê¹¨ì§€ì§€ ì•Šë„ë¡ ë°©ì§€í•œë‹¤[1][2][3].
- **ë¦¬íŒ©í„°ë§ ë‚´ì„±**: ë‚´ë¶€ êµ¬ì¡°(êµ¬í˜„) ë³€ê²½ì—ë„ í…ŒìŠ¤íŠ¸ê°€ ê¹¨ì§€ì§€ ì•Šê³  ê²¬ê³ í•´ì•¼ í•œë‹¤[1][2][3].
- **ë¹ ë¥¸ í”¼ë“œë°±**: í…ŒìŠ¤íŠ¸ê°€ ë¹ ë¥´ê²Œ ì‹¤í–‰ë˜ì–´ ê°œë°œìì—ê²Œ ì‹ ì†í•œ í”¼ë“œë°±ì„ ì œê³µí•œë‹¤[1][2][3].
- **ìœ ì§€ ë³´ìˆ˜ì„±**: í…ŒìŠ¤íŠ¸ê°€ ì´í•´í•˜ê¸° ì‰½ê³ , ë³€ê²½ì´ ì‰¬ìš¸ìˆ˜ë¡ ìœ ì§€ ë³´ìˆ˜ì„±ì´ ë†’ë‹¤[1][2][3].

ì´ ë„¤ ê°€ì§€ íŠ¹ì„± ì¤‘ í•˜ë‚˜ë¼ë„ 0ì ì´ë¼ë©´, ê·¸ í…ŒìŠ¤íŠ¸ì˜ ì „ì²´ ê°€ì¹˜ëŠ” 0ì´ ëœë‹¤. ì¦‰, ë„¤ ê°€ì§€ íŠ¹ì„±ì˜ ê³±ì´ í…ŒìŠ¤íŠ¸ì˜ ê°€ì¹˜ê°€ ëœë‹¤. ì†Œìˆ˜ì˜ ë§¤ìš° ê°€ì¹˜ ìˆëŠ” í…ŒìŠ¤íŠ¸ê°€ ë‹¤ìˆ˜ì˜ í‰ë²”í•œ í…ŒìŠ¤íŠ¸ë³´ë‹¤ í”„ë¡œì íŠ¸ ì„±ì¥ì— ë” íš¨ê³¼ì ì´ë‹¤[3].

```text
í…ŒìŠ¤íŠ¸ ê°€ì¹˜ = íšŒê·€ ë°©ì§€ ì ìˆ˜ Ã— ë¦¬íŒ©í„°ë§ ë‚´ì„± ì ìˆ˜ Ã— ë¹ ë¥¸ í”¼ë“œë°± ì ìˆ˜ Ã— ìœ ì§€ ë³´ìˆ˜ì„± ì ìˆ˜
```
---

### 4.4.1 ì´ìƒì ì¸ í…ŒìŠ¤íŠ¸ë¥¼ ë§Œë“¤ ìˆ˜ ìˆëŠ”ê°€?
- ë„¤ ê°€ì§€ íŠ¹ì„± ëª¨ë‘ë¥¼ ìµœëŒ€ì¹˜ë¡œ ê°–ëŠ” ì´ìƒì ì¸ í…ŒìŠ¤íŠ¸ëŠ” í˜„ì‹¤ì ìœ¼ë¡œ ë¶ˆê°€ëŠ¥í•˜ë‹¤[2][3].
- íšŒê·€ ë°©ì§€, ë¦¬íŒ©í„°ë§ ë‚´ì„±, ë¹ ë¥¸ í”¼ë“œë°±ì€ ì„œë¡œ ìƒì¶© ê´€ê³„ì— ìˆì–´, í•œ íŠ¹ì„±ì„ ê·¹ëŒ€í™”í•˜ë©´ ë‹¤ë¥¸ íŠ¹ì„±ì„ í¬ìƒí•´ì•¼ í•œë‹¤[3].
- ì–´ëŠ í•œ íŠ¹ì„±ë„ í¬ê²Œ ì¤„ì´ì§€ ì•ŠëŠ” ì„ ì—ì„œ ê· í˜•ì„ ë§ì¶”ëŠ” ê²ƒì´ ì¤‘ìš”í•˜ë‹¤[2][3].
### ğŸ¯ í˜„ì‹¤ì ì¸ ì ‘ê·¼

* **ë¦¬íŒ©í„°ë§ ë‚´ì„±ì€ ì ˆëŒ€ í¬ê¸°í•  ìˆ˜ ì—†ë‹¤.**
* ê²°êµ­, **íšŒê·€ ë°©ì§€**ì™€ **ë¹ ë¥¸ í”¼ë“œë°±** ì‚¬ì´ì—ì„œ ì ˆì¶©í•´ì•¼ í•œë‹¤.
* í…ŒìŠ¤íŠ¸ê°€ ì˜ë¯¸ ìˆìœ¼ë ¤ë©´ ë„¤ ê°€ì§€ ëª¨ë‘ ì–´ëŠ ì •ë„ì˜ ê¸°ì¤€ ì´ìƒì„ ì¶©ì¡±í•´ì•¼ í•œë‹¤.

---

### 4.4.2 ê·¹ë‹¨ì ì¸ ì‚¬ë¡€ 1: ì—”ë“œ íˆ¬ ì—”ë“œ í…ŒìŠ¤íŠ¸
- **ì¥ì **: ë§ì€ ì½”ë“œë¥¼ í…ŒìŠ¤íŠ¸í•˜ë¯€ë¡œ íšŒê·€ ë°©ì§€ì™€ ë¦¬íŒ©í„°ë§ ë‚´ì„±ì´ ë§¤ìš° ë†’ë‹¤[2][3].
- **ë‹¨ì **: ì‹¤í–‰ ì†ë„ê°€ ëŠë ¤ ë¹ ë¥¸ í”¼ë“œë°±ì„ ì œê³µí•˜ì§€ ëª»í•œë‹¤[2][3].
- **ìš”ì•½**: ì—”ë“œ íˆ¬ ì—”ë“œ í…ŒìŠ¤íŠ¸ë§Œìœ¼ë¡œëŠ” ì‹¤ì œ ê°œë°œì— í•„ìš”í•œ ë¹ ë¥¸ í”¼ë“œë°±ì„ ì–»ê¸° ì–´ë µë‹¤[2][3].
### ìš”ì•½

* âœ… íšŒê·€ ë°©ì§€: ê´‘ë²”ìœ„í•œ ì½”ë“œ ì»¤ë²„ë¦¬ì§€
* âœ… ë¦¬íŒ©í„°ë§ ë‚´ì„±: ì¸í„°í˜ì´ìŠ¤ ìˆ˜ì¤€ì—ì„œ ê²€ì¦

* âŒ í”¼ë“œë°± ëŠë¦¼: ì„œë²„, ë¸Œë¼ìš°ì € ë“± ì™¸ë¶€ ìš”ì†Œ ì˜ì¡´
* âŒ ìœ ì§€ ë³´ìˆ˜ì„± ë‚®ìŒ: ì¸í”„ë¼ ì„¤ì •, flaky í…ŒìŠ¤íŠ¸ ë°œìƒ

### ğŸ“Š íŠ¹ì„± í‰ê°€

| íŠ¹ì„±      | ì ìˆ˜  | ì´ìœ            |
| ------- | --- | ------------ |
| íšŒê·€ ë°©ì§€   | 1.0 | ì‹¤ì œ ë™ì‘ í™•ì¸     |
| ë¦¬íŒ©í„°ë§ ë‚´ì„± | 1.0 | êµ¬í˜„ ë³€ê²½ì— ì˜í–¥ ì—†ìŒ |
| ë¹ ë¥¸ í”¼ë“œë°±  | 0.0 | ëŠë¦¬ê³  ë¬´ê±°ì›€      |
| ìœ ì§€ ë³´ìˆ˜ì„±  | 0.3 | ì„¤ì •/ìš´ì˜ ë¹„ìš© í¼   |


---

### 4.4.3 ê·¹ë‹¨ì ì¸ ì‚¬ë¡€ 2: ê°„ë‹¨í•œ í…ŒìŠ¤íŠ¸
- **ì¥ì **: ë§¤ìš° ë¹ ë¥´ê²Œ ì‹¤í–‰ë˜ì–´ ë¹ ë¥¸ í”¼ë“œë°±ê³¼ ë¦¬íŒ©í„°ë§ ë‚´ì„±ì´ ë†’ë‹¤[2][3].
- **ë‹¨ì **: ì½”ë“œê°€ ë„ˆë¬´ ë‹¨ìˆœí•´ íšŒê·€ ë°©ì§€ íš¨ê³¼ëŠ” ê±°ì˜ ì—†ë‹¤[2][3].
- **ìš”ì•½**: ë‹¨ìˆœí•œ ì½”ë“œì— ëŒ€í•œ í…ŒìŠ¤íŠ¸ëŠ” ì˜ë¯¸ê°€ ì ê³ , íšŒê·€ ë°©ì§€ íš¨ê³¼ê°€ ë¯¸ë¯¸í•˜ë‹¤[2][3].

### ìš”ì•½

* âœ… ë¹ ë¦„
* âœ… ë¦¬íŒ©í„°ë§ ë‚´ì„± ì¢‹ìŒ

* âŒ íšŒê·€ ë°©ì§€ ë¶€ì¡±: ì˜ë¯¸ ìˆëŠ” ê²°í•¨ì„ ì¡ì•„ë‚´ì§€ ëª»í•¨
* âŒ í…ŒìŠ¤íŠ¸ ì´ë¦„ë§Œ ë°”ë€ â€œë™ì–´ ë°˜ë³µ í…ŒìŠ¤íŠ¸â€ê°€ ë§ìŒ

### ğŸ“Š íŠ¹ì„± í‰ê°€

| íŠ¹ì„±      | ì ìˆ˜  | ì´ìœ         |
| ------- | --- | --------- |
| íšŒê·€ ë°©ì§€   | 0.0 | ì‹¤íŒ¨ ê°€ëŠ¥ì„± ë‚®ìŒ |
| ë¦¬íŒ©í„°ë§ ë‚´ì„± | 1.0 | ê±°ì˜ ê¹¨ì§€ì§€ ì•ŠìŒ |
| ë¹ ë¥¸ í”¼ë“œë°±  | 1.0 | ì¦‰ì‹œ ì‹¤í–‰ë¨    |
| ìœ ì§€ ë³´ìˆ˜ì„±  | 0.8 | ì½”ë“œ ë‹¨ìˆœí•¨    |


---

### 4.4.4 ê·¹ë‹¨ì ì¸ ì‚¬ë¡€ 3: ê¹¨ì§€ê¸° ì‰¬ìš´ í…ŒìŠ¤íŠ¸
- **ì¥ì **: ë¹ ë¥´ê²Œ ì‹¤í–‰ë˜ê³  íšŒê·€ ë°©ì§€ íš¨ê³¼ê°€ ìˆë‹¤[2][3].
- **ë‹¨ì **: ë‚´ë¶€ êµ¬í˜„ì— ê°•í•˜ê²Œ ê²°í•©ë˜ì–´ ë¦¬íŒ©í„°ë§ ë‚´ì„±ì´ ê±°ì˜ ì—†ë‹¤. êµ¬í˜„ ë³€ê²½ ì‹œ ì‰½ê²Œ ê¹¨ì§„ë‹¤[2][3].
- **ìš”ì•½**: ë‚´ë¶€ êµ¬í˜„ì— ì˜ì¡´í•˜ëŠ” í…ŒìŠ¤íŠ¸ëŠ” ë¦¬íŒ©í„°ë§ì— ë§¤ìš° ì·¨ì•½í•˜ë‹¤[2][3].

### ìš”ì•½

* âœ… íšŒê·€ ë°©ì§€ ê°•ë ¥
* âœ… ë¹ ë¥¸ í”¼ë“œë°± ì œê³µ

* âŒ ë¦¬íŒ©í„°ë§ ë‚´ì„± ì—†ìŒ â†’ ë¦¬íŒ©í„°ë§ ì‹œ ì‹¤íŒ¨ ë§ìŒ
* âŒ ìœ ì§€ ë³´ìˆ˜ì„± ë–¨ì–´ì§: ì‘ì€ ë³€ê²½ì—ë„ ìì£¼ ìˆ˜ì •

### ğŸ“Š íŠ¹ì„± í‰ê°€

| íŠ¹ì„±      | ì ìˆ˜  | ì´ìœ             |
| ------- | --- | ------------- |
| íšŒê·€ ë°©ì§€   | 1.0 | ì½”ë“œ ë³€ê²½ ë¯¼ê°í•˜ê²Œ ê°ì§€ |
| ë¦¬íŒ©í„°ë§ ë‚´ì„± | 0.0 | ë‚´ë¶€ êµ¬í˜„ ì˜ì¡´      |
| ë¹ ë¥¸ í”¼ë“œë°±  | 1.0 | ë‹¨ë… ì‹¤í–‰ ê°€ëŠ¥      |
| ìœ ì§€ ë³´ìˆ˜ì„±  | 0.4 | ìì£¼ ìˆ˜ì •í•´ì•¼ í•¨     |

---

### 4.4.5 ì´ìƒì ì¸ í…ŒìŠ¤íŠ¸ë¥¼ ì°¾ì•„ì„œ: ê²°ë¡ 
- ì„¸ ê°€ì§€ ì£¼ìš” íŠ¹ì„±(íšŒê·€ ë°©ì§€, ë¦¬íŒ©í„°ë§ ë‚´ì„±, ë¹ ë¥¸ í”¼ë“œë°±)ì€ ëª¨ë‘ë¥¼ ë™ì‹œì— ê·¹ëŒ€í™”í•  ìˆ˜ ì—†ë‹¤[2][3].
- **ë¦¬íŒ©í„°ë§ ë‚´ì„±**ì€ í¬ê¸°í•  ìˆ˜ ì—†ëŠ” íŠ¹ì„±ì´ë¯€ë¡œ, íšŒê·€ ë°©ì§€ì™€ ë¹ ë¥¸ í”¼ë“œë°± ì‚¬ì´ì—ì„œ ì ì ˆíˆ íƒ€í˜‘í•´ì•¼ í•œë‹¤[2][3].
- í…ŒìŠ¤íŠ¸ ìŠ¤ìœ„íŠ¸ì˜ ì‹ ë¢°ë„ë¥¼ ë†’ì´ë ¤ë©´ ê±°ì§“ ì–‘ì„±(ë¶ˆì•ˆì •í•œ í…ŒìŠ¤íŠ¸)ì„ ìµœëŒ€í•œ ì¤„ì—¬ì•¼ í•œë‹¤[2][3].

> CAP ì´ë¡ ì²˜ëŸ¼ ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ë„ 3ê°€ì§€ ì¤‘ 2ê°€ì§€ë§Œ ì™„ì „í•˜ê²Œ ë‹¬ì„± ê°€ëŠ¥
---

### ìš”ì•½
- ì´ìƒì ì¸ í…ŒìŠ¤íŠ¸ëŠ” íšŒê·€ ë°©ì§€, ë¦¬íŒ©í„°ë§ ë‚´ì„±, ë¹ ë¥¸ í”¼ë“œë°±, ìœ ì§€ ë³´ìˆ˜ì„± ë„¤ ê°€ì§€ íŠ¹ì„± ëª¨ë‘ë¥¼ ìµœëŒ€í•œ ê°–ì¶”ì–´ì•¼ í•œë‹¤[2][3].
- í˜„ì‹¤ì ìœ¼ë¡œëŠ” ì„¸ ê°€ì§€ íŠ¹ì„±ì˜ ê· í˜•ì„ ë§ì¶”ê³ , ë¦¬íŒ©í„°ë§ ë‚´ì„±ì„ ë°˜ë“œì‹œ í™•ë³´í•´ì•¼ í•œë‹¤[2][3].
- í…ŒìŠ¤íŠ¸ì˜ ë¶ˆì•ˆì •ì„±(ê±°ì§“ ì–‘ì„±)ì„ ì¤„ì´ëŠ” ê²ƒì´ ê°€ì¥ ì¤‘ìš”í•˜ë‹¤[2][3].

---

### ìƒ˜í”Œ ì½”ë“œ 1
- **as-is: ê¹¨ì§€ê¸° ì‰¬ìš´ í…ŒìŠ¤íŠ¸(ë‚´ë¶€ êµ¬í˜„ ê²°í•©, ë¦¬íŒ©í„°ë§ ë‚´ì„± ë¶€ì¡±)**
```kotlin
class UserRepository {
    fun getUserById(id: Int): User {
        // ì‹¤ì œ DB ì¡°íšŒ ë¡œì§
        return User(id, "Alice")
    }
    var lastExecutedSql: String = ""
}

class UserRepositoryTest {
    @Test
    fun `ì˜¬ë°”ë¥¸ SQLì´ ì‹¤í–‰ë˜ëŠ”ì§€ ê²€ì¦`() {
        val repo = UserRepository()
        repo.getUserById(5)
        assertEquals("SELECT * FROM users WHERE id = 5", repo.lastExecutedSql)
    }
}
```
- ë‚´ë¶€ SQL êµ¬í˜„ì— ê°•í•˜ê²Œ ê²°í•©ë˜ì–´ ìˆì–´, ë¦¬íŒ©í„°ë§ ì‹œ ì‰½ê²Œ ê¹¨ì§„ë‹¤[2][3].

---

### ìƒ˜í”Œ ì½”ë“œ 2
- **to-be: ì™¸ë¶€ ê²°ê³¼ ì¤‘ì‹¬, ë¦¬íŒ©í„°ë§ ë‚´ì„± ê°•í™”, ë¹„ì¦ˆë‹ˆìŠ¤ ë„ë©”ì¸ ë°˜ì˜**
```kotlin
data class User(val id: Int, val name: String)

class UserRepository {
    fun getUserById(id: Int): User {
        // ì‹¤ì œ DB ì¡°íšŒ ë¡œì§
        return User(id, "Alice")
    }
}

class UserRepositoryTest {
    @Test
    fun `ì¡´ì¬í•˜ëŠ” IDë¡œ ì‚¬ìš©ìë¥¼ ì¡°íšŒí•˜ë©´ ì˜¬ë°”ë¥¸ User ê°ì²´ë¥¼ ë°˜í™˜í•œë‹¤`() {
        val repo = UserRepository()
        val user = repo.getUserById(5)
        assertEquals(5, user.id)
        assertEquals("Alice", user.name)
    }
}
```
- ë°˜í™˜ê°’(ë¹„ì¦ˆë‹ˆìŠ¤ ê²°ê³¼)ì— ì§‘ì¤‘í•´ í…ŒìŠ¤íŠ¸ê°€ ë‚´ë¶€ êµ¬í˜„ ë³€ê²½ì—ë„ ê²¬ê³ í•˜ë‹¤[2][3].


---

## ğŸ“¦ ë„ë©”ì¸ ê°€ì •: ì¬ê³  ê¸°ë°˜ ì£¼ë¬¸ ì‹œìŠ¤í…œ

* `Product`: ìƒí’ˆ ë„ë©”ì¸
* `OrderService`: ì¬ê³ ë¥¼ í™•ì¸í•˜ê³  ì£¼ë¬¸ì„ ì²˜ë¦¬
* `UserRepository`, `ProductRepository`: ê°„ë‹¨í•œ DAO ê³„ì¸µ

---


### ğŸ”´ as-is: ì—”ë“œ íˆ¬ ì—”ë“œ í…ŒìŠ¤íŠ¸ (ëŠë¦¬ê³  ë¬´ê±°ìš´ í…ŒìŠ¤íŠ¸)

```kotlin
// ì‹¤ì œ HTTP ìš”ì²­ê³¼ DB ì ‘ê·¼ì´ í¬í•¨ëœ í†µí•© í…ŒìŠ¤íŠ¸
@SpringBootTest
@AutoConfigureMockMvc
class OrderE2ETest {

    @Autowired
    lateinit var mockMvc: MockMvc

    @Test
    fun `ìƒí’ˆì„ ì£¼ë¬¸í•˜ë©´ ì¬ê³ ê°€ ì¤„ì–´ë“ ë‹¤`() {
        mockMvc.perform(
            post("/orders")
                .contentType(MediaType.APPLICATION_JSON)
                .content("""{ "productId": 1, "quantity": 2 }""")
        )
            .andExpect(status().isOk)
            .andExpect(jsonPath("$.status").value("ORDERED"))

        // ì¬ê³  í™•ì¸ìš© ì¿¼ë¦¬
        mockMvc.perform(get("/products/1"))
            .andExpect(jsonPath("$.stock").value(8))
    }
}
```

ğŸ“Œ ëŠë¦° í”¼ë“œë°±, ì™¸ë¶€ ì˜ì¡´ì„± (DB, API), ì„¤ì • ë³µì¡ â†’ E2E í…ŒìŠ¤íŠ¸ì˜ ë‹¨ì  ë°˜ì˜

---

### ğŸŸ¢ to-be: ë„ë©”ì¸ ì„œë¹„ìŠ¤ ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ (ë¹ ë¥¸ í”¼ë“œë°± + ë¦¬íŒ©í„°ë§ ë‚´ì„± ìœ ì§€)

```kotlin
class OrderServiceTest {

    private lateinit var productRepository: FakeProductRepository
    private lateinit var orderService: OrderService

    @BeforeEach
    fun setup() {
        productRepository = FakeProductRepository().apply {
            save(Product(1L, "Macbook", 10))
        }
        orderService = OrderService(productRepository)
    }

    @Test
    fun `ì •ìƒ ì£¼ë¬¸ ì‹œ ì¬ê³ ê°€ ì°¨ê°ëœë‹¤`() {
        orderService.order(productId = 1L, quantity = 2)

        val updated = productRepository.findById(1L)
        assertEquals(8, updated.stock)
    }
}
```

ğŸ“Œ ë¹ ë¥´ê³  ë…ë¦½ì ì´ë©° ë¦¬íŒ©í„°ë§ ë‚´ì„± ê°•í•¨

---

### ğŸ”´ as-is: ê°„ë‹¨í•œ í…ŒìŠ¤íŠ¸ (ì˜ë¯¸ ì—†ëŠ” getter í…ŒìŠ¤íŠ¸)

```kotlin
class ProductTest {

    @Test
    fun `getterê°€ ê°’ì„ ì˜ ë°˜í™˜í•œë‹¤`() {
        val product = Product(1L, "Keyboard", 10)
        assertEquals("Keyboard", product.name)
        assertEquals(10, product.stock)
    }
}
```

ğŸ“Œ ê±°ì˜ í•­ìƒ ì„±ê³µí•˜ëŠ” ì½”ë“œ â†’ íšŒê·€ ë°©ì§€ ê¸°ëŠ¥ ì—†ìŒ
ğŸ“Œ ì˜ë¯¸ ì—†ëŠ” í…ŒìŠ¤íŠ¸ ìœ ì§€í•  ê°€ì¹˜ ì—†ìŒ

---

### ğŸŸ¢ to-be: ì‹¤ì œ ë„ë©”ì¸ ê·œì¹™ ê²€ì¦

```kotlin
class ProductTest {

    @Test
    fun `ì¬ê³ ëŠ” ìŒìˆ˜ê°€ ë  ìˆ˜ ì—†ë‹¤`() {
        val exception = assertThrows<IllegalArgumentException> {
            Product(1L, "Monitor", -5)
        }
        assertEquals("ì¬ê³ ëŠ” 0 ì´ìƒì´ì–´ì•¼ í•©ë‹ˆë‹¤", exception.message)
    }
}
```

ğŸ“Œ ì œí’ˆ ìƒì„± ì‹œ ë„ë©”ì¸ ê·œì¹™ì„ ê²€ì¦í•˜ëŠ” í…ŒìŠ¤íŠ¸
ğŸ“Œ ì˜ë¯¸ ìˆëŠ” íšŒê·€ ë°©ì§€ ê¸°ëŠ¥ í¬í•¨

---

### ğŸ”´ as-is: ê¹¨ì§€ê¸° ì‰¬ìš´ í…ŒìŠ¤íŠ¸ (ë‚´ë¶€ ë¡œì§ í™•ì¸)

```kotlin
class OrderServiceTest {

    @Test
    fun `ì£¼ë¬¸ì‹œ ë‚´ë¶€ ë¡œê·¸ ë©”ì‹œì§€ë¥¼ í¬í•¨í•œë‹¤`() {
        val logger = TestLogger()
        val service = OrderService(productRepo = FakeProductRepository(), logger)

        service.order(1L, 2)

        // ë‚´ë¶€ êµ¬í˜„ì— ì˜ì¡´í•˜ëŠ” í…ŒìŠ¤íŠ¸ â†’ ë¡œê·¸ ë©”ì‹œì§€ ë³€ê²½ ì‹œ ê¹¨ì§
        assertTrue(logger.logs.contains("Ordering product id=1, quantity=2"))
    }
}
```

ğŸ“Œ ê¸°ëŠ¥ì€ ê·¸ëŒ€ë¡œì—¬ë„ ë¡œê·¸ ë©”ì‹œì§€ë‚˜ ë¡œê¹… í”„ë ˆì„ì›Œí¬ê°€ ë°”ë€Œë©´ ê¹¨ì§
ğŸ“Œ ë‚´ë¶€ êµ¬í˜„ì— ê²°í•©ë˜ì–´ ë¦¬íŒ©í„°ë§ ë‚´ì„± ì—†ìŒ

---

### ğŸŸ¢ to-be: ì™¸ë¶€ íš¨ê³¼ê°€ ì•„ë‹Œ **ë¹„ì¦ˆë‹ˆìŠ¤ ê²°ê³¼ ì¤‘ì‹¬ ê²€ì¦**

```kotlin
class OrderServiceTest {

    @Test
    fun `ì£¼ë¬¸í•˜ë©´ ì£¼ë¬¸ ìƒíƒœê°€ COMPLETEDë¡œ ì„¤ì •ëœë‹¤`() {
        val productRepo = FakeProductRepository().apply {
            save(Product(1L, "Mouse", 5))
        }
        val service = OrderService(productRepo)

        val order = service.order(1L, 2)

        assertEquals(OrderStatus.COMPLETED, order.status)
        assertEquals(3, productRepo.findById(1L).stock)
    }
}
```

ğŸ“Œ ì™¸ë¶€ ë¡œê·¸ë‚˜ ë©”ì‹œì§€ê°€ ì•„ë‹Œ, **ê²°ê³¼ ì¤‘ì‹¬** ê²€ì¦
ğŸ“Œ ë¦¬íŒ©í„°ë§ ë‚´ì„±ì´ ë†’ê³ , ë„ë©”ì¸ ê·œì¹™ì„ ì˜ ë°˜ì˜

---

## âœ… ì •ë¦¬: í…ŒìŠ¤íŠ¸ ìœ í˜•ë³„ ë¹„êµ ìš”ì•½

| í…ŒìŠ¤íŠ¸ ìœ í˜•     | as-is ë¬¸ì œì                     | to-be ê°œì„  ë°©í–¥                    |
| ---------- | ---------------------------- | ------------------------------ |
| ì—”ë“œ íˆ¬ ì—”ë“œ    | ëŠë¦¬ê³  flakyí•¨, ì„¤ì • ë¹„ìš© í¼          | í•µì‹¬ ë¡œì§ì€ ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ë¡œ ë¶„ë¦¬              |
| ê°„ë‹¨í•œ í…ŒìŠ¤íŠ¸    | í•­ìƒ ì„±ê³µí•˜ëŠ” ë¬´ì˜ë¯¸í•œ í…ŒìŠ¤íŠ¸             | ë„ë©”ì¸ ê·œì¹™ì´ë‚˜ ì˜ˆì™¸ ì¡°ê±´ ë“± ì‹¤ì œ ê°€ì¹˜ ìˆëŠ” ê²€ì¦   |
| ê¹¨ì§€ê¸° ì‰¬ìš´ í…ŒìŠ¤íŠ¸ | ë‚´ë¶€ êµ¬í˜„(ë¡œê·¸, SQL ë“±)ì— ì˜ì¡´í•˜ì—¬ ìì£¼ ê¹¨ì§ | ì™¸ë¶€ íš¨ê³¼ê°€ ì•„ë‹Œ **ê²°ê³¼** ì¤‘ì‹¬ì˜ í…ŒìŠ¤íŠ¸ë¡œ ë¦¬íŒ©í„°ë§ |

---


### ê²°ë¡ 
- ë„¤ ê°€ì§€ íŠ¹ì„± ì¤‘ ì–´ëŠ í•˜ë‚˜ë¼ë„ ë†“ì¹˜ë©´ í…ŒìŠ¤íŠ¸ì˜ ì „ì²´ ê°€ì¹˜ê°€ 0ì´ ëœë‹¤[2][3].
- ë¦¬íŒ©í„°ë§ ë‚´ì„±ì„ ë°˜ë“œì‹œ í™•ë³´í•˜ê³ , íšŒê·€ ë°©ì§€ì™€ ë¹ ë¥¸ í”¼ë“œë°± ì‚¬ì´ì—ì„œ ì „ëµì ìœ¼ë¡œ ê· í˜•ì„ ë§ì¶”ëŠ” ê²ƒì´ ì¤‘ìš”í•˜ë‹¤[2][3].
- ë¹„ì¦ˆë‹ˆìŠ¤ ê²°ê³¼ì— ì§‘ì¤‘í•œ í…ŒìŠ¤íŠ¸ê°€ ì¥ê¸°ì ìœ¼ë¡œ ì‹ ë¢°ë„ì™€ ìœ ì§€ ë³´ìˆ˜ì„±ì„ ë†’ì¸ë‹¤[2][3].

---

### ë‚´ ìƒê°
> ë¦¬íŒ©í† ë§ ë‚´ì„±ì€ í¬ê¸°í•  ìˆ˜ ì—†ë‹¤ê³  í•˜ì—¬ ê³ ë¯¼ì´ ë˜ëŠ” ë¶€ë¶„ì´ ë§ì•˜ë‹¤. ê²°êµ­ ë¦¬íŒ©í† ë§ ë‚´ì„±ì€ ì´ˆê¸°ì— í•¨ìˆ˜ë‚˜ í´ë˜ìŠ¤ì— ëŒ€í•œ ì„¤ê³„ì— ëŒ€í•œ ë¬¸ì œì¸ ê²ƒ ê°™ë‹¤. ì˜ˆë¥¼ë“¤ì–´ í•¨ìˆ˜ë¥¼ pure function ë©±ë“±í•˜ê²Œ ì„¤ê³„í•œë‹¤ë©´ ë‚´ë¶€ êµ¬í˜„ì´ ë³€ê²½ë˜ë”ë¼ë„ í…ŒìŠ¤íŠ¸ê°€ ì‹¤íŒ¨í•˜ì§€ ì•Šì„ê²ƒì´ë‹¤. ë§Œì•½ ë‚´ë¶€ì— êµ¬í˜„ëœ ì¼ë¶€ë¥¼ í™•ì¸í•´ì•¼ ëœë‹¤ë©´ ë¬¸ì œê°€ ë˜ê² ì§€ë§Œ ë§ì´ë‹¤. 
> 
> ì†ë„ì˜ ê²½ìš°ì—ë„ ì¸í„°ê·¸ë ˆì´ì…˜ í…ŒìŠ¤íŠ¸ë¥¼ ë­”ê°€ ë¹„ë™ê¸°ë¡œ êµ¬í˜„í•´ë‘ê³  ìƒì‹œ ë¦¬í¬íŒ…ì„ ë°›ì„ìˆ˜ ìˆë‹¤ë©´ ì¢‹ê² ë‹¤ëŠ” ìƒê°ì´ ë“¤ì—ˆë‹¤. ì–´ë–»ê²Œ êµ¬í˜„í• ì§€ëŠ” ë§ì€ ê³ ë¯¼ì´ í•„ìš”í•´ ë³´ì¸ë‹¤.
> íšŒê·€ ë°©ì§€ëŠ” ê²°êµ­ ë”” ì»¤í”Œë§ê³¼ ê´€ë ¨ëœ ë‚´ìš© ê°™ë‹¤. ê²°êµ­ì—” íŠ¹ì • ê¸°ëŠ¥ì˜ ì‚¬ìš©ì²˜ê°€ ë§ë‹¤ ë³´ë©´ ë¬¸ì œê°€ ìƒê¸¸ ìš”ì§€ê°€ ë§ì•„ì§„ë‹¤. ë”°ë¼ì„œ ì½”ë“œì˜ ì‘ì§‘ë„ì™€ ê²°í•©ë„ë¥¼ ë‚®ì¶”ëŠ” SOLID ê°œë°œ ì›ì¹™ì„ ì˜ ì§€í‚¤ëŠ” ê²ƒì´ ë§Œë³‘í†µì¹˜ì•½ì´ë¼ëŠ” ìƒê°ì´ ë“ ë‹¤. 

## ì¶œì²˜
- [1] Unit Testing (1) - ì¢‹ì€ ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ì˜ 4ëŒ€ ìš”ì†Œ https://velog.io/@jhvictor4/Unit-Testing-1-%EC%A2%8B%EC%9D%80-%EB%8B%A8%EC%9C%84-%ED%85%8C%EC%8A%A4%ED%8A%B8%EC%9D%98-4%EB%8C%80-%EC%9A%94%EC%86%8C
- [2] 4ì¥ - ì¢‹ì€ ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ì˜ 4ëŒ€ ìš”ì†Œ https://greedy0110.tistory.com/158
- [3] 4ì¥ ì¢‹ì€ ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ì˜ 4ëŒ€ ìš”ì†Œ https://dev-playground.oopy.io/6966add4-1e7c-427f-bf6f-cf980420dc5c
- [4] 2501-danwi-teseuteu-pages-127-136.pdf https://ppl-ai-file-upload.s3.amazonaws.com/web/direct-files/attachments/32004849/eccd86e1-7fcb-4453-8caf-85d25d1dc4f1/2501-danwi-teseuteu-pages-127-136.pdf
- [5] ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ 4. ì¢‹ì€ ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ì˜ 4ëŒ€ ìš”ì†Œ - ê³µë¶€í•˜ëŠ” ê°œë°œì https://lannstark.tistory.com/224
- [6] [ë‹¨ìœ„ í…ŒìŠ¤íŠ¸] ì¢‹ì€ ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ì˜ 4ëŒ€ ìš”ì†Œ ìì„¸íˆ ì‚´í´ë³´ê¸° https://bryandev.tistory.com/1512
- [7] ì¢…ë‹¨ ê°„ í…ŒìŠ¤íŠ¸ - ìœ í˜•, í”„ë¡œì„¸ìŠ¤, ë„êµ¬ ë“±! - [zaptest](https://www.zaptest.com/ko/%EC%97%94%EB%93%9C-%ED%88%AC-%EC%97%94%EB%93%9C-%ED%85%8C%EC%8A%A4%ED%8A%B8-e2e-%ED%85%8C%EC%8A%A4%ED%8A%B8-%EC%9C%A0%ED%98%95-%ED%94%84%EB%A1%9C%EC%84%B8%EC%8A%A4-%EC%A0%91%EA%B7%BC-%EB%B0%A9) 
- [8] ì†Œí”„íŠ¸ì›¨ì–´ í…ŒìŠ¤íŠ¸. ì´ ê¸€ì—ì„œëŠ” ê°œë°œìê°€ í•  ìˆ˜ ìˆëŠ” ìë™í™”ëœ í…ŒìŠ¤íŠ¸ ... https://monday9pm.com/%EC%86%8C%ED%94%84%ED%8A%B8%EC%9B%A8%EC%96%B4-%ED%85%8C%EC%8A%A4%ED%8A%B8-d7b6a8960c7b
- [9] ìœ ì§€ë³´ìˆ˜ í•˜ê¸° ì‰¬ìš´ í…ŒìŠ¤íŠ¸ ì½”ë“œ ë§Œë“¤ê¸°, ê¹¨ì§€ê¸° ì‰¬ìš´ í…ŒìŠ¤íŠ¸ ì˜ˆë°©í•˜ê¸° https://jonghoonpark.com/2023/12/12/unit-test-of-google
- [10] 030. (Unit Test Principles) 4. ì¢‹ì€ ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ì˜ 4ëŒ€ ìš”ì†Œ https://namhoon.kim/2022/11/08/method-test/030/index.html
- [11] ê°€ì¹˜ìˆëŠ” í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•œ ì „ëµê³¼ êµ¬í˜„ - í† ìŠ¤ í…Œí¬ https://toss.tech/article/test-strategy-server
- [12] https://greedy0110.tistory.com/158
- [13] https://dev-playground.oopy.io/6966add4-1e7c-427f-bf6f-cf980420dc5c










